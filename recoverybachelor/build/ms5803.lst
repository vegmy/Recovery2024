ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ms5803.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/ms5803.c"
  20              		.section	.text.MS5803_read,"ax",%progbits
  21              		.align	1
  22              		.global	MS5803_read
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	MS5803_read:
  28              	.LVL0:
  29              	.LFB132:
   1:Core/Src/ms5803.c **** /*
   2:Core/Src/ms5803.c ****  * ms5803.c
   3:Core/Src/ms5803.c ****  *
   4:Core/Src/ms5803.c ****  */
   5:Core/Src/ms5803.c **** 
   6:Core/Src/ms5803.c **** #include "ms5803.h"
   7:Core/Src/ms5803.c **** 
   8:Core/Src/ms5803.c **** /**
   9:Core/Src/ms5803.c ****  * @brief Reads from MS5803
  10:Core/Src/ms5803.c ****  * @param handle The I2C handle being used
  11:Core/Src/ms5803.c ****  * @param bufp The buffer to be read into
  12:Core/Src/ms5803.c ****  * @param len The length of the buffer in 8-bit increments
  13:Core/Src/ms5803.c ****  * @retval HAL Status
  14:Core/Src/ms5803.c ****  */
  15:Core/Src/ms5803.c **** HAL_StatusTypeDef MS5803_read(void *handle, uint8_t *bufp, uint16_t len) {
  30              		.loc 1 15 74 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 15 74 is_stmt 0 view .LVU1
  35 0000 00B5     		push	{lr}
  36              		.cfi_def_cfa_offset 4
  37              		.cfi_offset 14, -4
  38 0002 83B0     		sub	sp, sp, #12
  39              		.cfi_def_cfa_offset 16
  40 0004 1346     		mov	r3, r2
  16:Core/Src/ms5803.c **** 	return HAL_I2C_Master_Receive(handle, MS5803_ADDR, bufp, len, 1);
  41              		.loc 1 16 2 is_stmt 1 view .LVU2
  42              		.loc 1 16 9 is_stmt 0 view .LVU3
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 2


  43 0006 0122     		movs	r2, #1
  44              	.LVL1:
  45              		.loc 1 16 9 view .LVU4
  46 0008 0092     		str	r2, [sp]
  47 000a 0A46     		mov	r2, r1
  48 000c EC21     		movs	r1, #236
  49              	.LVL2:
  50              		.loc 1 16 9 view .LVU5
  51 000e FFF7FEFF 		bl	HAL_I2C_Master_Receive
  52              	.LVL3:
  17:Core/Src/ms5803.c **** }
  53              		.loc 1 17 1 view .LVU6
  54 0012 03B0     		add	sp, sp, #12
  55              		.cfi_def_cfa_offset 4
  56              		@ sp needed
  57 0014 5DF804FB 		ldr	pc, [sp], #4
  58              		.cfi_endproc
  59              	.LFE132:
  61              		.section	.text.MS5803_write,"ax",%progbits
  62              		.align	1
  63              		.global	MS5803_write
  64              		.syntax unified
  65              		.thumb
  66              		.thumb_func
  68              	MS5803_write:
  69              	.LVL4:
  70              	.LFB133:
  18:Core/Src/ms5803.c **** 
  19:Core/Src/ms5803.c **** /**
  20:Core/Src/ms5803.c ****  * @brief Writes to MS5803
  21:Core/Src/ms5803.c ****  * @param handle The I2C handle being used
  22:Core/Src/ms5803.c ****  * @param bufp The buffer to read from
  23:Core/Src/ms5803.c ****  * @param len The length of the buffer in 8-bit increments
  24:Core/Src/ms5803.c ****  * @retval HAL Status
  25:Core/Src/ms5803.c ****  */
  26:Core/Src/ms5803.c **** HAL_StatusTypeDef MS5803_write(void *handle, uint8_t *bufp, uint16_t len) {
  71              		.loc 1 26 75 is_stmt 1 view -0
  72              		.cfi_startproc
  73              		@ args = 0, pretend = 0, frame = 0
  74              		@ frame_needed = 0, uses_anonymous_args = 0
  75              		.loc 1 26 75 is_stmt 0 view .LVU8
  76 0000 00B5     		push	{lr}
  77              		.cfi_def_cfa_offset 4
  78              		.cfi_offset 14, -4
  79 0002 83B0     		sub	sp, sp, #12
  80              		.cfi_def_cfa_offset 16
  81 0004 1346     		mov	r3, r2
  27:Core/Src/ms5803.c **** 	return HAL_I2C_Master_Transmit(handle, MS5803_ADDR, bufp, len, 1);
  82              		.loc 1 27 2 is_stmt 1 view .LVU9
  83              		.loc 1 27 9 is_stmt 0 view .LVU10
  84 0006 0122     		movs	r2, #1
  85              	.LVL5:
  86              		.loc 1 27 9 view .LVU11
  87 0008 0092     		str	r2, [sp]
  88 000a 0A46     		mov	r2, r1
  89 000c EC21     		movs	r1, #236
  90              	.LVL6:
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 3


  91              		.loc 1 27 9 view .LVU12
  92 000e FFF7FEFF 		bl	HAL_I2C_Master_Transmit
  93              	.LVL7:
  28:Core/Src/ms5803.c **** }
  94              		.loc 1 28 1 view .LVU13
  95 0012 03B0     		add	sp, sp, #12
  96              		.cfi_def_cfa_offset 4
  97              		@ sp needed
  98 0014 5DF804FB 		ldr	pc, [sp], #4
  99              		.cfi_endproc
 100              	.LFE133:
 102              		.section	.text.MS5803_reset,"ax",%progbits
 103              		.align	1
 104              		.global	MS5803_reset
 105              		.syntax unified
 106              		.thumb
 107              		.thumb_func
 109              	MS5803_reset:
 110              	.LVL8:
 111              	.LFB134:
  29:Core/Src/ms5803.c **** 
  30:Core/Src/ms5803.c **** /**
  31:Core/Src/ms5803.c ****  * @brief Resets the MS5803
  32:Core/Src/ms5803.c ****  * @param handle The I2C Handle being used
  33:Core/Src/ms5803.c ****  * @retval HAL Status
  34:Core/Src/ms5803.c ****  */
  35:Core/Src/ms5803.c **** HAL_StatusTypeDef MS5803_reset(I2C_HandleTypeDef *handle) {
 112              		.loc 1 35 59 is_stmt 1 view -0
 113              		.cfi_startproc
 114              		@ args = 0, pretend = 0, frame = 16
 115              		@ frame_needed = 0, uses_anonymous_args = 0
 116              		.loc 1 35 59 is_stmt 0 view .LVU15
 117 0000 10B5     		push	{r4, lr}
 118              		.cfi_def_cfa_offset 8
 119              		.cfi_offset 4, -8
 120              		.cfi_offset 14, -4
 121 0002 86B0     		sub	sp, sp, #24
 122              		.cfi_def_cfa_offset 32
  36:Core/Src/ms5803.c **** 	uint8_t buf[12];
 123              		.loc 1 36 2 is_stmt 1 view .LVU16
  37:Core/Src/ms5803.c **** 	buf[0] = MS5803_RESET;
 124              		.loc 1 37 2 view .LVU17
 125              		.loc 1 37 9 is_stmt 0 view .LVU18
 126 0004 1E22     		movs	r2, #30
 127 0006 8DF80C20 		strb	r2, [sp, #12]
  38:Core/Src/ms5803.c **** 	HAL_StatusTypeDef ret = HAL_I2C_Master_Transmit(handle, MS5803_ADDR, MS5803_RESET, 1, 1);
 128              		.loc 1 38 2 is_stmt 1 view .LVU19
 129              		.loc 1 38 26 is_stmt 0 view .LVU20
 130 000a 0123     		movs	r3, #1
 131 000c 0093     		str	r3, [sp]
 132 000e EC21     		movs	r1, #236
 133 0010 FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 134              	.LVL9:
 135              		.loc 1 38 26 view .LVU21
 136 0014 0446     		mov	r4, r0
 137              	.LVL10:
  39:Core/Src/ms5803.c **** 	HAL_Delay(3);
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 4


 138              		.loc 1 39 2 is_stmt 1 view .LVU22
 139 0016 0320     		movs	r0, #3
 140 0018 FFF7FEFF 		bl	HAL_Delay
 141              	.LVL11:
  40:Core/Src/ms5803.c **** 	return ret;
 142              		.loc 1 40 2 view .LVU23
  41:Core/Src/ms5803.c **** }
 143              		.loc 1 41 1 is_stmt 0 view .LVU24
 144 001c 2046     		mov	r0, r4
 145 001e 06B0     		add	sp, sp, #24
 146              		.cfi_def_cfa_offset 8
 147              		@ sp needed
 148 0020 10BD     		pop	{r4, pc}
 149              		.loc 1 41 1 view .LVU25
 150              		.cfi_endproc
 151              	.LFE134:
 153              		.section	.text.MS5803_coeff,"ax",%progbits
 154              		.align	1
 155              		.global	MS5803_coeff
 156              		.syntax unified
 157              		.thumb
 158              		.thumb_func
 160              	MS5803_coeff:
 161              	.LVL12:
 162              	.LFB135:
  42:Core/Src/ms5803.c **** 
  43:Core/Src/ms5803.c **** /**
  44:Core/Src/ms5803.c ****  * @brief Gets the 6 Coefficients from the MS5803 and reads them into the MS5803_coefficient array.
  45:Core/Src/ms5803.c ****  * @param handle The I2C Handle being used
  46:Core/Src/ms5803.c ****  * @param coeff The pointer to the coefficient being read in to
  47:Core/Src/ms5803.c ****  * @param value The coefficient number
  48:Core/Src/ms5803.c ****  * @return HAL Status
  49:Core/Src/ms5803.c ****  */
  50:Core/Src/ms5803.c **** HAL_StatusTypeDef MS5803_coeff(void *handle, uint16_t *coeff, uint8_t value) {
 163              		.loc 1 50 78 is_stmt 1 view -0
 164              		.cfi_startproc
 165              		@ args = 0, pretend = 0, frame = 16
 166              		@ frame_needed = 0, uses_anonymous_args = 0
 167              		.loc 1 50 78 is_stmt 0 view .LVU27
 168 0000 30B5     		push	{r4, r5, lr}
 169              		.cfi_def_cfa_offset 12
 170              		.cfi_offset 4, -12
 171              		.cfi_offset 5, -8
 172              		.cfi_offset 14, -4
 173 0002 85B0     		sub	sp, sp, #20
 174              		.cfi_def_cfa_offset 32
 175 0004 0546     		mov	r5, r0
 176 0006 0C46     		mov	r4, r1
  51:Core/Src/ms5803.c **** 	uint8_t buf[12];
 177              		.loc 1 51 2 is_stmt 1 view .LVU28
  52:Core/Src/ms5803.c **** 	buf[0] = MS5803_PROM + (value << 1); //coefficient to read
 178              		.loc 1 52 2 view .LVU29
 179              		.loc 1 52 32 is_stmt 0 view .LVU30
 180 0008 5200     		lsls	r2, r2, #1
 181              	.LVL13:
 182              		.loc 1 52 32 view .LVU31
 183 000a D2B2     		uxtb	r2, r2
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 5


 184              		.loc 1 52 23 view .LVU32
 185 000c 603A     		subs	r2, r2, #96
 186              		.loc 1 52 9 view .LVU33
 187 000e 8DF80420 		strb	r2, [sp, #4]
  53:Core/Src/ms5803.c **** 	HAL_StatusTypeDef x = MS5803_write(handle, buf, 1); //tell MS5803 that we want it
 188              		.loc 1 53 2 is_stmt 1 view .LVU34
 189              		.loc 1 53 24 is_stmt 0 view .LVU35
 190 0012 0122     		movs	r2, #1
 191 0014 01A9     		add	r1, sp, #4
 192              	.LVL14:
 193              		.loc 1 53 24 view .LVU36
 194 0016 FFF7FEFF 		bl	MS5803_write
 195              	.LVL15:
  54:Core/Src/ms5803.c **** 	HAL_Delay(2); //delay until it is ready
 196              		.loc 1 54 2 is_stmt 1 view .LVU37
 197 001a 0220     		movs	r0, #2
 198 001c FFF7FEFF 		bl	HAL_Delay
 199              	.LVL16:
  55:Core/Src/ms5803.c **** 	uint8_t c[2];
 200              		.loc 1 55 2 view .LVU38
  56:Core/Src/ms5803.c **** 	x = MS5803_read(handle, c, 2); //read the coefficient
 201              		.loc 1 56 2 view .LVU39
 202              		.loc 1 56 6 is_stmt 0 view .LVU40
 203 0020 0222     		movs	r2, #2
 204 0022 6946     		mov	r1, sp
 205 0024 2846     		mov	r0, r5
 206 0026 FFF7FEFF 		bl	MS5803_read
 207              	.LVL17:
  57:Core/Src/ms5803.c **** 	*coeff = (c[0] << 8) + c[1]; //turn the two 8-bit values into one coherent value.
 208              		.loc 1 57 2 is_stmt 1 view .LVU41
 209              		.loc 1 57 13 is_stmt 0 view .LVU42
 210 002a 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 211              		.loc 1 57 26 view .LVU43
 212 002e 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 213              		.loc 1 57 23 view .LVU44
 214 0032 03EB0223 		add	r3, r3, r2, lsl #8
 215              		.loc 1 57 9 view .LVU45
 216 0036 2380     		strh	r3, [r4]	@ movhi
  58:Core/Src/ms5803.c **** 	return x;
 217              		.loc 1 58 2 is_stmt 1 view .LVU46
  59:Core/Src/ms5803.c **** }
 218              		.loc 1 59 1 is_stmt 0 view .LVU47
 219 0038 05B0     		add	sp, sp, #20
 220              		.cfi_def_cfa_offset 12
 221              		@ sp needed
 222 003a 30BD     		pop	{r4, r5, pc}
 223              		.loc 1 59 1 view .LVU48
 224              		.cfi_endproc
 225              	.LFE135:
 227              		.section	.text.MS5803_ADC,"ax",%progbits
 228              		.align	1
 229              		.global	MS5803_ADC
 230              		.syntax unified
 231              		.thumb
 232              		.thumb_func
 234              	MS5803_ADC:
 235              	.LVL18:
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 6


 236              	.LFB136:
  60:Core/Src/ms5803.c **** 
  61:Core/Src/ms5803.c **** /**
  62:Core/Src/ms5803.c ****  * @brief Reads the MS5803 ADC
  63:Core/Src/ms5803.c ****  * @param handle The I2C Handle being used
  64:Core/Src/ms5803.c ****  * @param type The measurement type, chosen from measurement enum
  65:Core/Src/ms5803.c ****  * @param prec The precision to use, chosen from precision enum
  66:Core/Src/ms5803.c ****  * @retval Raw 24-bit data from the ADC
  67:Core/Src/ms5803.c ****  */
  68:Core/Src/ms5803.c **** uint32_t MS5803_ADC(void *handle, measurement type, precision prec) {
 237              		.loc 1 68 69 is_stmt 1 view -0
 238              		.cfi_startproc
 239              		@ args = 0, pretend = 0, frame = 24
 240              		@ frame_needed = 0, uses_anonymous_args = 0
 241              		.loc 1 68 69 is_stmt 0 view .LVU50
 242 0000 30B5     		push	{r4, r5, lr}
 243              		.cfi_def_cfa_offset 12
 244              		.cfi_offset 4, -12
 245              		.cfi_offset 5, -8
 246              		.cfi_offset 14, -4
 247 0002 87B0     		sub	sp, sp, #28
 248              		.cfi_def_cfa_offset 40
 249 0004 0546     		mov	r5, r0
 250 0006 1446     		mov	r4, r2
  69:Core/Src/ms5803.c **** 	uint32_t result;
 251              		.loc 1 69 2 is_stmt 1 view .LVU51
  70:Core/Src/ms5803.c **** 	uint8_t buf[12];
 252              		.loc 1 70 2 view .LVU52
  71:Core/Src/ms5803.c **** 	buf[0] = MS5803_ADC_CONV + type + prec; //tell the ADC to convert along with the precision and typ
 253              		.loc 1 71 2 view .LVU53
 254              		.loc 1 71 34 is_stmt 0 view .LVU54
 255 0008 8B18     		adds	r3, r1, r2
 256 000a 4033     		adds	r3, r3, #64
 257              		.loc 1 71 9 view .LVU55
 258 000c 8DF80C30 		strb	r3, [sp, #12]
  72:Core/Src/ms5803.c **** 	MS5803_write(handle, buf, 1);
 259              		.loc 1 72 2 is_stmt 1 view .LVU56
 260 0010 0122     		movs	r2, #1
 261              	.LVL19:
 262              		.loc 1 72 2 is_stmt 0 view .LVU57
 263 0012 03A9     		add	r1, sp, #12
 264              	.LVL20:
 265              		.loc 1 72 2 view .LVU58
 266 0014 FFF7FEFF 		bl	MS5803_write
 267              	.LVL21:
  73:Core/Src/ms5803.c **** 	for (size_t i = 0; i < 22000; i++)
 268              		.loc 1 73 2 is_stmt 1 view .LVU59
 269              	.LBB2:
 270              		.loc 1 73 7 view .LVU60
 271              		.loc 1 73 14 is_stmt 0 view .LVU61
 272 0018 0023     		movs	r3, #0
 273              		.loc 1 73 2 view .LVU62
 274 001a 00E0     		b	.L10
 275              	.LVL22:
 276              	.L11:
  74:Core/Src/ms5803.c **** 	{
  75:Core/Src/ms5803.c **** 		/* code */ //tilsvarer 650 usek delay
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 7


  76:Core/Src/ms5803.c **** 	}
 277              		.loc 1 76 2 is_stmt 1 view .LVU63
  73:Core/Src/ms5803.c **** 	for (size_t i = 0; i < 22000; i++)
 278              		.loc 1 73 33 discriminator 3 view .LVU64
 279 001c 0133     		adds	r3, r3, #1
 280              	.LVL23:
 281              	.L10:
  73:Core/Src/ms5803.c **** 	for (size_t i = 0; i < 22000; i++)
 282              		.loc 1 73 23 discriminator 1 view .LVU65
 283 001e 45F2EF51 		movw	r1, #21999
 284 0022 8B42     		cmp	r3, r1
 285 0024 FAD9     		bls	.L11
 286              	.LBE2:
  77:Core/Src/ms5803.c **** 	
  78:Core/Src/ms5803.c **** 	switch(prec) {
 287              		.loc 1 78 2 view .LVU66
 288 0026 023C     		subs	r4, r4, #2
 289              	.LVL24:
 290              		.loc 1 78 2 is_stmt 0 view .LVU67
 291 0028 062C     		cmp	r4, #6
 292 002a 08D8     		bhi	.L12
 293 002c DFE804F0 		tbb	[pc, r4]
 294              	.LVL25:
 295              	.L14:
 296 0030 04       		.byte	(.L17-.L14)/2
 297 0031 07       		.byte	(.L12-.L14)/2
 298 0032 22       		.byte	(.L16-.L14)/2
 299 0033 07       		.byte	(.L12-.L14)/2
 300 0034 26       		.byte	(.L15-.L14)/2
 301 0035 07       		.byte	(.L12-.L14)/2
 302 0036 2A       		.byte	(.L13-.L14)/2
 303 0037 00       		.p2align 1
 304              	.L17:
  79:Core/Src/ms5803.c **** 		case ADC_256:
  80:Core/Src/ms5803.c **** 		break;
  81:Core/Src/ms5803.c **** 		case ADC_512: HAL_Delay(3);
 305              		.loc 1 81 17 is_stmt 1 view .LVU68
 306 0038 0320     		movs	r0, #3
 307 003a FFF7FEFF 		bl	HAL_Delay
 308              	.LVL26:
  82:Core/Src/ms5803.c **** 		break;
 309              		.loc 1 82 3 view .LVU69
 310              	.L12:
  83:Core/Src/ms5803.c **** 		case ADC_1024: HAL_Delay(4);
  84:Core/Src/ms5803.c **** 		break;
  85:Core/Src/ms5803.c **** 		case ADC_2048: HAL_Delay(6);
  86:Core/Src/ms5803.c **** 		break;
  87:Core/Src/ms5803.c **** 		case ADC_4096: HAL_Delay(10); //Delay longer if higher precision, as conversion takes longer.
  88:Core/Src/ms5803.c **** 	}
  89:Core/Src/ms5803.c **** 	buf[0] = MS5803_ADC_READ; //Tell the MS5803 that we want to read the ADC
 311              		.loc 1 89 2 view .LVU70
 312              		.loc 1 89 9 is_stmt 0 view .LVU71
 313 003e 0023     		movs	r3, #0
 314 0040 8DF80C30 		strb	r3, [sp, #12]
  90:Core/Src/ms5803.c **** 	MS5803_write(handle, buf, 1);
 315              		.loc 1 90 2 is_stmt 1 view .LVU72
 316 0044 0122     		movs	r2, #1
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 8


 317 0046 03A9     		add	r1, sp, #12
 318 0048 2846     		mov	r0, r5
 319 004a FFF7FEFF 		bl	MS5803_write
 320              	.LVL27:
  91:Core/Src/ms5803.c **** 	//HAL_Delay(0.7);
  92:Core/Src/ms5803.c **** 	uint8_t c[3];
 321              		.loc 1 92 2 view .LVU73
  93:Core/Src/ms5803.c **** 	volatile HAL_StatusTypeDef test = MS5803_read(handle, c, 3); //Read out the ADC
 322              		.loc 1 93 2 view .LVU74
 323              		.loc 1 93 36 is_stmt 0 view .LVU75
 324 004e 0322     		movs	r2, #3
 325 0050 02A9     		add	r1, sp, #8
 326 0052 2846     		mov	r0, r5
 327 0054 FFF7FEFF 		bl	MS5803_read
 328              	.LVL28:
 329              		.loc 1 93 29 discriminator 1 view .LVU76
 330 0058 8DF80700 		strb	r0, [sp, #7]
  94:Core/Src/ms5803.c **** 
  95:Core/Src/ms5803.c **** 	result = (c[0] << 16) + (c[1] << 8) + c[2]; //Convert the three 8-bit values into one value.
 331              		.loc 1 95 2 is_stmt 1 view .LVU77
 332              		.loc 1 95 13 is_stmt 0 view .LVU78
 333 005c 9DF80820 		ldrb	r2, [sp, #8]	@ zero_extendqisi2
 334              		.loc 1 95 28 view .LVU79
 335 0060 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 336              		.loc 1 95 32 view .LVU80
 337 0064 1B02     		lsls	r3, r3, #8
 338              		.loc 1 95 24 view .LVU81
 339 0066 03EB0243 		add	r3, r3, r2, lsl #16
 340              		.loc 1 95 41 view .LVU82
 341 006a 9DF80A00 		ldrb	r0, [sp, #10]	@ zero_extendqisi2
 342              	.LVL29:
  96:Core/Src/ms5803.c **** 	return result;
 343              		.loc 1 96 2 is_stmt 1 view .LVU83
  97:Core/Src/ms5803.c **** }
 344              		.loc 1 97 1 is_stmt 0 view .LVU84
 345 006e 1844     		add	r0, r0, r3
 346              	.LVL30:
 347              		.loc 1 97 1 view .LVU85
 348 0070 07B0     		add	sp, sp, #28
 349              		.cfi_remember_state
 350              		.cfi_def_cfa_offset 12
 351              		@ sp needed
 352 0072 30BD     		pop	{r4, r5, pc}
 353              	.LVL31:
 354              	.L16:
 355              		.cfi_restore_state
  83:Core/Src/ms5803.c **** 		break;
 356              		.loc 1 83 18 is_stmt 1 view .LVU86
 357 0074 0420     		movs	r0, #4
 358 0076 FFF7FEFF 		bl	HAL_Delay
 359              	.LVL32:
  84:Core/Src/ms5803.c **** 		case ADC_2048: HAL_Delay(6);
 360              		.loc 1 84 3 view .LVU87
 361 007a E0E7     		b	.L12
 362              	.L15:
  85:Core/Src/ms5803.c **** 		break;
 363              		.loc 1 85 18 view .LVU88
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 9


 364 007c 0620     		movs	r0, #6
 365 007e FFF7FEFF 		bl	HAL_Delay
 366              	.LVL33:
  86:Core/Src/ms5803.c **** 		case ADC_4096: HAL_Delay(10); //Delay longer if higher precision, as conversion takes longer.
 367              		.loc 1 86 3 view .LVU89
 368 0082 DCE7     		b	.L12
 369              	.L13:
  87:Core/Src/ms5803.c **** 	}
 370              		.loc 1 87 18 view .LVU90
 371 0084 0A20     		movs	r0, #10
 372 0086 FFF7FEFF 		bl	HAL_Delay
 373              	.LVL34:
 374 008a D8E7     		b	.L12
 375              		.cfi_endproc
 376              	.LFE136:
 378              		.global	__aeabi_f2d
 379              		.global	__aeabi_dmul
 380              		.global	__aeabi_dadd
 381              		.global	__aeabi_d2f
 382              		.section	.text.MS5803_get_values,"ax",%progbits
 383              		.align	1
 384              		.global	MS5803_get_values
 385              		.syntax unified
 386              		.thumb
 387              		.thumb_func
 389              	MS5803_get_values:
 390              	.LVL35:
 391              	.LFB137:
  98:Core/Src/ms5803.c **** 
  99:Core/Src/ms5803.c **** /**
 100:Core/Src/ms5803.c ****  * @brief Gets temperature and pressure values from the MS5803
 101:Core/Src/ms5803.c ****  * @param handle The I2C Handle being used
 102:Core/Src/ms5803.c ****  * @param prec The precision to be used
 103:Core/Src/ms5803.c ****  * @param temperature The pointer to the temperature variable being read in to.
 104:Core/Src/ms5803.c ****  * @param pressure The pointer to the pressure variable being read in to.
 105:Core/Src/ms5803.c ****  */
 106:Core/Src/ms5803.c **** void MS5803_get_values(void *handle, precision prec, float *temperature, float *pressure) {
 392              		.loc 1 106 91 view -0
 393              		.cfi_startproc
 394              		@ args = 0, pretend = 0, frame = 0
 395              		@ frame_needed = 0, uses_anonymous_args = 0
 396              		.loc 1 106 91 is_stmt 0 view .LVU92
 397 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 398              		.cfi_def_cfa_offset 24
 399              		.cfi_offset 3, -24
 400              		.cfi_offset 4, -20
 401              		.cfi_offset 5, -16
 402              		.cfi_offset 6, -12
 403              		.cfi_offset 7, -8
 404              		.cfi_offset 14, -4
 405 0002 2DED048B 		vpush.64	{d8, d9}
 406              		.cfi_def_cfa_offset 40
 407              		.cfi_offset 80, -40
 408              		.cfi_offset 81, -36
 409              		.cfi_offset 82, -32
 410              		.cfi_offset 83, -28
 411 0006 0746     		mov	r7, r0
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 10


 412 0008 0E46     		mov	r6, r1
 413 000a 1546     		mov	r5, r2
 414 000c 1C46     		mov	r4, r3
 107:Core/Src/ms5803.c **** 	uint32_t temperature_raw = MS5803_ADC(handle, TEMPERATURE, prec);
 415              		.loc 1 107 2 is_stmt 1 view .LVU93
 416              		.loc 1 107 29 is_stmt 0 view .LVU94
 417 000e 0A46     		mov	r2, r1
 418              	.LVL36:
 419              		.loc 1 107 29 view .LVU95
 420 0010 1021     		movs	r1, #16
 421              	.LVL37:
 422              		.loc 1 107 29 view .LVU96
 423 0012 FFF7FEFF 		bl	MS5803_ADC
 424              	.LVL38:
 425              		.loc 1 107 29 view .LVU97
 426 0016 08EE900A 		vmov	s17, r0	@ int
 427              	.LVL39:
 108:Core/Src/ms5803.c **** 	uint32_t pressure_raw = MS5803_ADC(handle, PRESSURE, prec); //get temperature and pressure raw val
 428              		.loc 1 108 2 is_stmt 1 view .LVU98
 429              		.loc 1 108 26 is_stmt 0 view .LVU99
 430 001a 3246     		mov	r2, r6
 431 001c 0021     		movs	r1, #0
 432 001e 3846     		mov	r0, r7
 433              	.LVL40:
 434              		.loc 1 108 26 view .LVU100
 435 0020 FFF7FEFF 		bl	MS5803_ADC
 436              	.LVL41:
 437 0024 08EE100A 		vmov	s16, r0	@ int
 438              	.LVL42:
 109:Core/Src/ms5803.c **** 
 110:Core/Src/ms5803.c **** 	float coef_0 = MS5803_coefficient[0];
 439              		.loc 1 110 2 is_stmt 1 view .LVU101
 440              		.loc 1 110 35 is_stmt 0 view .LVU102
 441 0028 3949     		ldr	r1, .L22
 442 002a 0888     		ldrh	r0, [r1]
 443              	.LVL43:
 111:Core/Src/ms5803.c **** 	float coef_1 = MS5803_coefficient[1];
 444              		.loc 1 111 2 is_stmt 1 view .LVU103
 445              		.loc 1 111 35 is_stmt 0 view .LVU104
 446 002c 4B88     		ldrh	r3, [r1, #2]
 447 002e 09EE103A 		vmov	s18, r3	@ int
 448              		.loc 1 111 8 view .LVU105
 449 0032 B8EE499A 		vcvt.f32.u32	s18, s18
 450              	.LVL44:
 112:Core/Src/ms5803.c **** 	float coef_2 = MS5803_coefficient[2];
 451              		.loc 1 112 2 is_stmt 1 view .LVU106
 452              		.loc 1 112 35 is_stmt 0 view .LVU107
 453 0036 8B88     		ldrh	r3, [r1, #4]
 454 0038 09EE903A 		vmov	s19, r3	@ int
 455              		.loc 1 112 8 view .LVU108
 456 003c F8EE699A 		vcvt.f32.u32	s19, s19
 457              	.LVL45:
 113:Core/Src/ms5803.c **** 	float coef_3 = MS5803_coefficient[3];
 458              		.loc 1 113 2 is_stmt 1 view .LVU109
 459              		.loc 1 113 35 is_stmt 0 view .LVU110
 460 0040 CB88     		ldrh	r3, [r1, #6]
 461 0042 07EE903A 		vmov	s15, r3	@ int
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 11


 462              		.loc 1 113 8 view .LVU111
 463 0046 B8EE677A 		vcvt.f32.u32	s14, s15
 464              	.LVL46:
 114:Core/Src/ms5803.c **** 	float coef_4 = MS5803_coefficient[4];
 465              		.loc 1 114 2 is_stmt 1 view .LVU112
 466              		.loc 1 114 35 is_stmt 0 view .LVU113
 467 004a 0B89     		ldrh	r3, [r1, #8]
 468 004c 06EE903A 		vmov	s13, r3	@ int
 469              		.loc 1 114 8 view .LVU114
 470 0050 F8EE666A 		vcvt.f32.u32	s13, s13
 471              	.LVL47:
 115:Core/Src/ms5803.c **** 	float coef_5 = MS5803_coefficient[5];
 472              		.loc 1 115 2 is_stmt 1 view .LVU115
 473              		.loc 1 115 35 is_stmt 0 view .LVU116
 474 0054 4B89     		ldrh	r3, [r1, #10]
 475 0056 07EE903A 		vmov	s15, r3	@ int
 476              		.loc 1 115 8 view .LVU117
 477 005a F8EE677A 		vcvt.f32.u32	s15, s15
 478              	.LVL48:
 116:Core/Src/ms5803.c **** 
 117:Core/Src/ms5803.c **** 	float sub = coef_4 * 256.f;
 479              		.loc 1 117 2 is_stmt 1 view .LVU118
 480              		.loc 1 117 8 is_stmt 0 view .LVU119
 481 005e 9FED2D6A 		vldr.32	s12, .L22+4
 482 0062 66EE866A 		vmul.f32	s13, s13, s12
 483              	.LVL49:
 118:Core/Src/ms5803.c **** 	float dT = temperature_raw - sub;
 484              		.loc 1 118 2 is_stmt 1 view .LVU120
 485              		.loc 1 118 29 is_stmt 0 view .LVU121
 486 0066 F8EE688A 		vcvt.f32.u32	s17, s17
 487              	.LVL50:
 488              		.loc 1 118 8 view .LVU122
 489 006a 78EEE68A 		vsub.f32	s17, s17, s13
 490              	.LVL51:
 119:Core/Src/ms5803.c **** 	float temp = 2000.f + ((dT * coef_5)/(8388608.f));
 491              		.loc 1 119 2 is_stmt 1 view .LVU123
 492              		.loc 1 119 29 is_stmt 0 view .LVU124
 493 006e 67EEA87A 		vmul.f32	s15, s15, s17
 494              	.LVL52:
 495              		.loc 1 119 38 view .LVU125
 496 0072 DFED296A 		vldr.32	s13, .L22+8
 497              	.LVL53:
 498              		.loc 1 119 38 view .LVU126
 499 0076 67EEA67A 		vmul.f32	s15, s15, s13
 500              		.loc 1 119 8 view .LVU127
 501 007a DFED286A 		vldr.32	s13, .L22+12
 502 007e 77EEA67A 		vadd.f32	s15, s15, s13
 503              	.LVL54:
 120:Core/Src/ms5803.c **** 	*temperature = temp/100.f; //determine temperature according to datasheet
 504              		.loc 1 120 2 is_stmt 1 view .LVU128
 505              		.loc 1 120 21 is_stmt 0 view .LVU129
 506 0082 9FED276A 		vldr.32	s12, .L22+16
 507              	.LVL55:
 508              		.loc 1 120 21 view .LVU130
 509 0086 C7EE866A 		vdiv.f32	s13, s15, s12
 510              		.loc 1 120 15 view .LVU131
 511 008a C5ED006A 		vstr.32	s13, [r5]
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 12


 512              	.LVL56:
 121:Core/Src/ms5803.c **** 
 122:Core/Src/ms5803.c **** 	//int64_t add = ((int64_t)MS5803_coefficient[3])*((int64_t)(temperature_raw - sub))/128;
 123:Core/Src/ms5803.c **** 	float add = (coef_3 * dT)/128.f;
 513              		.loc 1 123 2 is_stmt 1 view .LVU132
 514              		.loc 1 123 22 is_stmt 0 view .LVU133
 515 008e 67EE287A 		vmul.f32	s15, s14, s17
 516              	.LVL57:
 517              		.loc 1 123 8 view .LVU134
 518 0092 9FED247A 		vldr.32	s14, .L22+20
 519              	.LVL58:
 520              		.loc 1 123 8 view .LVU135
 521 0096 67EE877A 		vmul.f32	s15, s15, s14
 522              	.LVL59:
 124:Core/Src/ms5803.c **** 	float OFF = (coef_1 * 65536.f)+add;
 523              		.loc 1 124 2 is_stmt 1 view .LVU136
 524              		.loc 1 124 22 is_stmt 0 view .LVU137
 525 009a 9FED237A 		vldr.32	s14, .L22+24
 526 009e 29EE079A 		vmul.f32	s18, s18, s14
 527              	.LVL60:
 528              		.loc 1 124 8 view .LVU138
 529 00a2 39EE279A 		vadd.f32	s18, s18, s15
 530              	.LVL61:
 125:Core/Src/ms5803.c **** 	float SENS = (coef_0 * 32768.0) + (coef_2 * dT)/256.f;
 531              		.loc 1 125 2 is_stmt 1 view .LVU139
 532              		.loc 1 125 23 is_stmt 0 view .LVU140
 533 00a6 07EE900A 		vmov	s15, r0	@ int
 534              	.LVL62:
 535              		.loc 1 125 23 view .LVU141
 536 00aa F8EE677A 		vcvt.f32.u32	s15, s15
 537              	.LVL63:
 538              		.loc 1 125 23 view .LVU142
 539 00ae 17EE900A 		vmov	r0, s15
 540 00b2 FFF7FEFF 		bl	__aeabi_f2d
 541              	.LVL64:
 542              		.loc 1 125 23 view .LVU143
 543 00b6 0022     		movs	r2, #0
 544 00b8 1C4B     		ldr	r3, .L22+28
 545 00ba FFF7FEFF 		bl	__aeabi_dmul
 546              	.LVL65:
 547 00be 0646     		mov	r6, r0
 548              	.LVL66:
 549              		.loc 1 125 23 view .LVU144
 550 00c0 0F46     		mov	r7, r1
 551              	.LVL67:
 552              		.loc 1 125 44 view .LVU145
 553 00c2 69EEA89A 		vmul.f32	s19, s19, s17
 554              	.LVL68:
 555              		.loc 1 125 49 view .LVU146
 556 00c6 DFED1A7A 		vldr.32	s15, .L22+32
 557 00ca 69EEA77A 		vmul.f32	s15, s19, s15
 558 00ce 17EE900A 		vmov	r0, s15
 559 00d2 FFF7FEFF 		bl	__aeabi_f2d
 560              	.LVL69:
 561 00d6 0246     		mov	r2, r0
 562 00d8 0B46     		mov	r3, r1
 563              		.loc 1 125 34 view .LVU147
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 13


 564 00da 3046     		mov	r0, r6
 565 00dc 3946     		mov	r1, r7
 566 00de FFF7FEFF 		bl	__aeabi_dadd
 567              	.LVL70:
 568              		.loc 1 125 8 view .LVU148
 569 00e2 FFF7FEFF 		bl	__aeabi_d2f
 570              	.LVL71:
 571 00e6 07EE900A 		vmov	s15, r0
 572              	.LVL72:
 126:Core/Src/ms5803.c **** 	float mult = pressure_raw * SENS/2097152.f;
 573              		.loc 1 126 2 is_stmt 1 view .LVU149
 574              		.loc 1 126 28 is_stmt 0 view .LVU150
 575 00ea B8EE488A 		vcvt.f32.u32	s16, s16
 576              	.LVL73:
 577              		.loc 1 126 28 view .LVU151
 578 00ee 28EE278A 		vmul.f32	s16, s16, s15
 579              		.loc 1 126 8 view .LVU152
 580 00f2 DFED107A 		vldr.32	s15, .L22+36
 581 00f6 28EE278A 		vmul.f32	s16, s16, s15
 582              	.LVL74:
 127:Core/Src/ms5803.c **** 	float pres = (mult-OFF)/327680.f;
 583              		.loc 1 127 2 is_stmt 1 view .LVU153
 584              		.loc 1 127 20 is_stmt 0 view .LVU154
 585 00fa 38EE498A 		vsub.f32	s16, s16, s18
 586              	.LVL75:
 587              		.loc 1 127 8 view .LVU155
 588 00fe 9FED0E7A 		vldr.32	s14, .L22+40
 589 0102 C8EE077A 		vdiv.f32	s15, s16, s14
 590              	.LVL76:
 128:Core/Src/ms5803.c **** 	*pressure = pres; //determine pressure according to datasheet
 591              		.loc 1 128 2 is_stmt 1 view .LVU156
 592              		.loc 1 128 12 is_stmt 0 view .LVU157
 593 0106 C4ED007A 		vstr.32	s15, [r4]
 129:Core/Src/ms5803.c **** }...
 594              		.loc 1 129 1 view .LVU158
 595 010a BDEC048B 		vldm	sp!, {d8-d9}
 596              		.cfi_restore 82
 597              		.cfi_restore 83
 598              		.cfi_restore 80
 599              		.cfi_restore 81
 600              		.cfi_def_cfa_offset 24
 601              	.LVL77:
 602              		.loc 1 129 1 view .LVU159
 603 010e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 604              	.LVL78:
 605              	.L23:
 606              		.loc 1 129 1 view .LVU160
 607              		.align	2
 608              	.L22:
 609 0110 00000000 		.word	MS5803_coefficient
 610 0114 00008043 		.word	1132462080
 611 0118 00000034 		.word	872415232
 612 011c 0000FA44 		.word	1157234688
 613 0120 0000C842 		.word	1120403456
 614 0124 0000003C 		.word	1006632960
 615 0128 00008047 		.word	1199570944
 616 012c 0000E040 		.word	1088421888
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 14


 617 0130 0000803B 		.word	998244352
 618 0134 00000035 		.word	889192448
 619 0138 0000A048 		.word	1218445312
 620              		.cfi_endproc
 621              	.LFE137:
 623              		.text
 624              	.Letext0:
 625              		.file 2 "C:/Users/John_/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-to
 626              		.file 3 "C:/Users/John_/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-to
 627              		.file 4 "C:/Users/John_/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-to
 628              		.file 5 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 629              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 630              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 631              		.file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_i2c.h"
 632              		.file 9 "Core/Inc/ms5803.h"
 633              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
ARM GAS  C:\Users\John_\AppData\Local\Temp\cc21W2gl.s 			page 15


DEFINED SYMBOLS
                            *ABS*:00000000 ms5803.c
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:21     .text.MS5803_read:00000000 $t
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:27     .text.MS5803_read:00000000 MS5803_read
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:62     .text.MS5803_write:00000000 $t
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:68     .text.MS5803_write:00000000 MS5803_write
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:103    .text.MS5803_reset:00000000 $t
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:109    .text.MS5803_reset:00000000 MS5803_reset
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:154    .text.MS5803_coeff:00000000 $t
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:160    .text.MS5803_coeff:00000000 MS5803_coeff
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:228    .text.MS5803_ADC:00000000 $t
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:234    .text.MS5803_ADC:00000000 MS5803_ADC
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:296    .text.MS5803_ADC:00000030 $d
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:383    .text.MS5803_get_values:00000000 $t
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:389    .text.MS5803_get_values:00000000 MS5803_get_values
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:609    .text.MS5803_get_values:00000110 $d
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:303    .text.MS5803_ADC:00000037 $d
C:\Users\John_\AppData\Local\Temp\cc21W2gl.s:303    .text.MS5803_ADC:00000038 $t

UNDEFINED SYMBOLS
HAL_I2C_Master_Receive
HAL_I2C_Master_Transmit
HAL_Delay
__aeabi_f2d
__aeabi_dmul
__aeabi_dadd
__aeabi_d2f
MS5803_coefficient
